{# è¨­å®šåŸºç¤æ¨¡æ¿(å¯è¢«ç¹¼æ‰¿) #}

{% block Html %}
<!DOCTYPE html>
<html lang="zh-Hant-TW">

<head>
    {# blockä»£è¡¨åœ¨ç¹¼æ‰¿çš„ç¶²é ä¸­å¯ä»¥è‡ªè¨‚çš„å…§å®¹å€å¡Šï¼Œblockå¾Œé¢åŠ ä¸Šè‡ªè¨‚æ¨™é¡Œ #}
    {# æ²’æœ‰ä½¿ç”¨blockåŒ…èµ·ä¾†çš„å€å¡Šï¼Œåœ¨è¢«å…¶ä»–ç¶²é ç¹¼æ‰¿çš„æ™‚å€™å…§å®¹åŸå°ä¸å‹•æ¬ç§»ä¸”ç„¡æ³•è‡ªè¨‚å…§å®¹ #}
    {% block Head %}
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no, user-scalable=yes" />
    <meta name="Description" content="å±ç§‘ç§Ÿå±‹ç¶²-{{ self.Title() }}" />
    <meta name="keywords" content="å±ç§‘å¤§, ç§Ÿå±‹ç¶², å±ç§‘ç§Ÿå±‹ç¶²" />
    <meta name="author" content="ç¬¬äºŒçµ„" />
    <link rel='icon' type='image/x-icon' href='{% block Web_Icon %}{% endblock Web_Icon %}' />
    <title>å±ç§‘ç§Ÿå±‹ç¶² | {% block Title %}{% endblock Title %}</title>

    <!-- Facebook Open Graph -->
    <meta property="og:title" content="å±ç§‘ç§Ÿå±‹ç¶²-{{ self.Title() }}" />
    <meta property="og:type" content="website" />
    <meta property="fb:app_id" content="" />
    <meta property="og:url" content="" />
    <meta property="og:image" content="" />
    <meta property="og:image:alt" content="" />
    <meta property="og:image:type" content="image/png" />
    <meta property="og:image:width" content="" />
    <meta property="og:image:height" content="" />
    <meta property="og:site_name" content="å±ç§‘ç§Ÿå±‹ç¶²-{{ self.Title() }}" />
    <meta property="og:description" content="å±ç§‘ç§Ÿå±‹ç¶²-ç‚ºå­¸ç”ŸåŠæˆ¿æ±æä¾›çš„ç§Ÿå±‹æˆ–åˆŠç™»æˆ¿å±‹å¹³å°" />
    <!-- Twitter Open Graph -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="ç¬¬äºŒçµ„" />
    <meta name="twitter:creator" content="ç¬¬äºŒçµ„" />
    <meta name="twitter:url" content="" />
    <meta name="twitter:title" content="å±ç§‘ç§Ÿå±‹ç¶²-{{ self.Title() }}" />
    <meta name="twitter:description" content="å±ç§‘ç§Ÿå±‹ç¶²-ç‚ºå­¸ç”ŸåŠæˆ¿æ±æä¾›çš„ç§Ÿå±‹æˆ–åˆŠç™»æˆ¿å±‹å¹³å°" />
    <meta name="twitter:image" content="" />
    <meta name="twitter:image:alt" content="" />

    <!-- ç¶²å€æ¨™æº–åŒ– -->
    <!--link rel="canonical" href="https://" /-->

    <!-- Style CDN (Bootstrap) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous"
        defer />

    <!-- Bootstrap Select (https://github.com/snapappointments/bootstrap-select) -->
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.18/css/bootstrap-select.min.css"
        integrity="sha512-ARJR74swou2y0Q2V9k0GbzQ/5vJ2RBSoCWokg4zkfM29Fb3vZEQyv0iWBMW/yvKgyHSR/7D64pFMmU8nYmbRkg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" defer />

    <!-- Material Design wbe components
    <link rel="stylesheet" href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css"> -->

    {% block CSS %}
    <!-- Custom Style (è‡ªè¨‚çš„CSSï¼Œåªéœ€æ›´æ”¹filename) -->
    <link rel="stylesheet" href="{{ url_for('static', filename='./css/style.css') }}" defer>
    <link rel="stylesheet" href="{{ url_for('static', filename='./css/dark_mode.css') }}" defer>
    <link rel="stylesheet" href="{{ url_for('static', filename='./css/toast.css') }}" defer>
    <link rel="stylesheet" href="{{ url_for('static', filename='./css/rwd.css') }}" defer>
    {% endblock CSS %}

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" as="font" href="https://fonts.gstatic.com" crossorigin>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
        integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
        crossorigin="anonymous" referrerpolicy="no-referrer" defer />

    <!-- Global site tag (gtag.js) - Google Analytics (ä¹‹å¾Œå†è¨­å®š) -->
    {% endblock Head %}
</head>

<body class="bg_image d-flex justify-content-center">
    <div id="dark_style" class="container-fluid row d-flex justify-content-center">
        <!-- ç¶²é é é¦– -->
        <div class="col-12">
            <header id="header" class="row justify-content-center">
                {% block Nav %}
                <!-- å°è¦½åˆ— -->
                <nav id="nav" class="col p-4 navbar navbar-expand-md d-inline-flex">
                    <a aria-current="page" href="." alt="å±ç§‘ç§Ÿå±‹ç¶²"><i class="fa-solid fa-house fs-1"></i></a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                        data-bs-target="#navbarScroll" aria-controls="navbarScroll" aria-expanded="false"
                        aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarScroll">
                        <ul class="navbar-nav nav p-2 me-auto justify-content-end fw-bold fs-3">
                            <li class="nav-item">
                                <a class="nav-link mx-3 un" href="./house_search">æœå°‹æˆ¿å±‹</a>
                            </li>
                            <li class="nav-item mx-3 dropdown">
                                <a class="nav-link dropdown-toggle un " href="#" id="navbarDropdownMenuLink"
                                    role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                    è³‡è¨Šç®¡ç†
                                </a>
                                <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                                    <li><a class="dropdown-item un fw-bold" href="/tenant_managed">æˆ¿æ±ç®¡ç†æˆ¿å®¢ç§Ÿå±‹è³‡è¨Š</a></li>
                                    <li><a class="dropdown-item un fw-bold" href="/house_managed">æˆ¿æ±ç®¡ç†ç™»è¨˜çš„æˆ¿å±‹</a></li>
                                </ul>
                            </li>
                            <li class="nav-item mx-3 dropdown">
                                <a class="nav-link dropdown-toggle un " href="#" id="navbarDropdownMenuLink"
                                    role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                    è³‡è¨ŠæŸ¥çœ‹
                                </a>
                                <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                                    <li><a class="dropdown-item un fw-bold" href="/house_info">æˆ¿å®¢æŸ¥çœ‹æˆ¿å±‹è³‡è¨Š</a></li>
                                    <li><a class="dropdown-item un fw-bold" href="/landlord_info">æˆ¿å®¢æŸ¥çœ‹æˆ¿æ±è³‡è¨Š</a></li>
                                </ul>
                            </li>
                            <li class="nav-item mx-3 dropdown">
                                <a class="nav-link dropdown-toggle un " href="#" id="navbarDropdownMenuLink"
                                    role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                    å›å ±/æª¢èˆ‰
                                </a>
                                <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                                    <li><a class="dropdown-item un fw-bold" href="/Report&Feedback">æˆ¿å®¢æ’°å¯«å›å ±/æª¢èˆ‰</a></li>
                                    <li><a class="dropdown-item un fw-bold" href="/edit_Report&Feedback">æˆ¿å®¢ç®¡ç†å›å ±/æª¢èˆ‰</a>
                                    </li>
                                </ul>
                            </li>
                            <li class="nav-item mx-3 dropdown">
                                <a class="nav-link dropdown-toggle un " href="#" id="navbarDropdownMenuLink"
                                    role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                    è¿½è¹¤
                                </a>
                                <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                                    <li>
                                        <a class="dropdown-item un fw-bold" href="/track_house">æˆ¿å®¢æŸ¥çœ‹è¿½è¹¤çš„æˆ¿å±‹</a>
                                    </li>
                                    <li><a class="dropdown-item un fw-bold" href="/track_landlord">æˆ¿å®¢æŸ¥çœ‹è¿½è¹¤çš„æˆ¿æ±</a></li>
                                </ul>
                            </li>
                            <li class="nav-item mx-3 dropdown">
                                <a class="nav-link dropdown-toggle un " href="#" id="navbarDropdownMenuLink"
                                    role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                    å¾Œå°
                                </a>
                                <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                                    <li><a class="dropdown-item un fw-bold" href="/system_Managed">å·¥ç¨‹å¸«å¾Œå°ç®¡ç†ä»‹é¢</a></li>
                                    <li><a class="dropdown-item un fw-bold" href="/block">é»‘åå–®</a></li>
                                </ul>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link mx-3 un" href="/profile">æˆ¿å®¢/æˆ¿æ±å€‹äººè³‡æ–™</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link mx-3 un" href="./private_chat">ç§è¨Š</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link mx-3 un" href="./login&signup">ç™»å…¥/è¨»å†Š</a>
                            </li>
                        </ul>
                        <a href="" class="text-reset mx-5">
                            <i class="fa-solid fa-bell fs-1"></i>
                        </a>
                        <!-- æš—é»‘æ¨¡å¼æŒ‰éˆ• -->
                        <button type='button' id='dark_mode' class='light ms-2'>ğŸŒ“</button>
                    </div>
                </nav>
                {% endblock Nav %}
            </header>
        </div>

        <!-- è·‘é¦¬ç‡ˆ -->
        {% block ticker %}
        <div class="col-12 col-md-11 my-2">
            <div class="ticker-container">
                <div id="ticker">
                    <p>æ–½å·¥ä¸­ğŸš§</p>
                </div>
            </div>
        </div>
        {% endblock ticker %}

        <!-- ç¶²é ä¸»å€å¡Š -->
        {% block Main_Main %}
        <div id="Outer_Main" class="col-12 col-md-11">
            <!-- å½ˆå‡ºæç¤ºæ¡†(è­¦å‘Šç”¨) -->
            <div class="toast-3">
                <div id="liveToast-Waring" class="toast hide" role="alert" aria-live="assertive" aria-atomic="true"
                    data-bs-autohide="false">
                    <!-- æ¨™é¡Œ -->
                    <div class="toast-header m-3 soft_title_white">
                        <img src="" class="me-2" alt="">
                        <strong class="me-auto fs-2 text-danger">
                            <i class="fa-solid fa-triangle-exclamation"></i>
                            è­¦å‘Š
                        </strong>
                    </div>
                    <!-- å…§å®¹ -->
                    <div class="toast-body">
                        <!-- è‡ªè¨‚è¨Šæ¯å€å¡Š -->
                        <p class="fw-bold fs-3 px-4">
                            <span id="toast_waring_message"></span>
                        </p>
                        <!-- æŒ‰éˆ• -->
                        <div align="center" class="mt-3 toast-body-style-1">
                            <button type="button" class="btn btn-primary btn-sm px-3 fs-3 un-green"
                                data-bs-dismiss="toast">ç¢ºèª</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- å½ˆå‡ºæç¤ºæ¡†(æç¤ºç”¨) -->
            <div class="toast-3">
                <div id="liveToast-tip" class="toast hide" role="alert" aria-live="assertive" aria-atomic="true"
                    data-bs-autohide="false">
                    <!-- æ¨™é¡Œ -->
                    <div class="toast-header m-3 soft_title_white">
                        <img src="" class="me-2" alt="">
                        <strong class="me-auto fs-2 text-success">
                            <i class="fa-solid fa-triangle-exclamation"></i>
                            æç¤º
                        </strong>
                    </div>
                    <!-- å…§å®¹ -->
                    <div class="toast-body">
                        <!-- è‡ªè¨‚è¨Šæ¯å€å¡Š -->
                        <p class="fw-bold fs-3 px-4">
                            <span id="toast_tip_message"></span>
                        </p>
                        <!-- æŒ‰éˆ• -->
                        <div align="center" class="mt-3 toast-body-style-1">
                            <button type="button" class="btn btn-primary btn-sm px-3 fs-3 un-green"
                                data-bs-dismiss="toast">ç¢ºèª</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ä¸»å€å¡Šå…§å®¹ -->
            {% block Outer_Main %}
            <main id="Main" class="row d-flex justify-content-center">
                {% block Main %} {% endblock Main %}
            </main>
            {% endblock Outer_Main %}
        </div>
        {% endblock Main_Main %}

        <!-- ç¶²é é å°¾ -->
        <div class="col-12 col-md-11">
            {% block Outer_Footer %}
            <footer id="Footer" class="row d-flex justify-content-around gy-3">
                {% block Footer %} {% endblock Footer %}
            </footer>
            {% endblock Outer_Footer %}
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
        crossorigin="anonymous"></script>

    <!-- Bootstrap Select JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.18/js/i18n/defaults-zh_TW.min.js"
        integrity="sha512-kVhgMTBNV+cZtYqu8Fa+3emkB08eMd8yqp+xK9IVvIHEE0+qDeqyhnfqi7i70vONR0nT1B1dlC5jzuuVtDMgQQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <!-- Font Awesome JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"
        integrity="sha512-fD9DI5bZwQxOi7MhYWnnNPlvXdp/2Pj3XSTRrFs5FQa4mizyGLnJcN6tuvUS6LbmgN1ut+XGSABKvjN0H6Aoow=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <!-- è‡ªå‹•æ‰“å­— Typed.js - https://github.com/mattboldt/typed.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/typed.js/2.0.10/typed.min.js"
        integrity="sha512-hIlMpy2enepx9maXZF1gn0hsvPLerXoLHdb095CmRY5HG3bZfN7XPBZ14g+TUDH1aGgfLyPHmY9/zuU53smuMw=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    {% block JS %}
    <!-- Custom JS (è‡ªè¨‚çš„JSï¼Œåªéœ€æ›´æ”¹filename) -->
    <script src="{{ url_for('static', filename='./js/dropdown_hover.js') }}"></script>
    <script src="{{ url_for('static', filename='./js/auto_typed.js') }}"></script>
    <script src="{{ url_for('static', filename='./js/toast.js') }}"></script>

    {% block Script %}
    <script>
        // å½ˆå‡ºæç¤ºæ¡†(è­¦å‘Š)
        var toast_Waring = document.getElementById('liveToast-Waring'); // è­¦å‘Šå½ˆå‡ºæ¡†
        var message = document.getElementById('toast_waring_message'); // å¯«å…¥è¨Šæ¯

        // å½ˆå‡ºæç¤ºæ¡†(æç¤º)
        var toast_tip = document.getElementById('liveToast-tip'); // æç¤ºå½ˆå‡ºæ¡†
        var message_tip = document.getElementById('toast_tip_message'); // å¯«å…¥è¨Šæ¯

        // åˆ‡æ›æš—é»‘æ¨¡å¼æŒ‰éˆ•
        let dark_mode = document.getElementById('dark_mode'); // æš—é»‘æ¨¡å¼æŒ‰éˆ•
        let dark_style = document.getElementById('dark_style'); // æš—é»‘æ¨¡å¼æ¨£å¼


        // è§£æcookie
        function parseCookie() {
            let cookieObj = {};
            let cookieAry = document.cookie.split(';');
            let cookie = "";

            for (var i = 0, l = cookieAry.length; i < l; ++i) {
                cookie = cookieAry[i].trim();
                cookie = cookie.split('=');
                cookieObj[cookie[0]] = cookie[1];
            }
            return cookieObj;
        }

        // å¾cookieä¸­å–å¾—ç‰¹å®šåç¨±å±¬æ€§å€¼
        async function getCookieByName(name) {
            let value = parseCookie()[name];
            if (value) {
                value = decodeURIComponent(value);
            }
            return value;
        }

        // æš—é»‘æ¨¡å¼æ¨£å¼
        async function dark() {
            dark_mode.classList.remove('light')
            dark_mode.classList.add('dark')
            dark_mode.innerText = "ğŸŒ“";
            dark_style.classList.add('dark_mode');
        }

        // æ˜äº®æ¨¡å¼æ¨£å¼
        async function light() {
            dark_mode.classList.remove('dark')
            dark_mode.classList.add('light')
            dark_mode.innerText = "ğŸŒ";
            dark_style.classList.remove('dark_mode');
        }

        // æª¢æŸ¥cookieçš„æš—é»‘æ¨¡å¼è¨­ç½®
        async function check_dark() {
            // å–å¾—cookieçš„æš—é»‘æ¨¡å¼æ•¸å€¼
            var dark_value = await getCookieByName('dark');

            // ç¢ºèªæš—é»‘æ¨¡å¼æ˜¯å¦å·²è¨­ç‚ºå•Ÿç”¨
            switch (dark_value) {
                case 'on':
                    dark();
                    break;
                case 'off':
                    light();
                    break;
            }
        }
        check_dark()

        // æš—é»‘æ¨¡å¼æŒ‰éˆ•é»æ“Šåµæ¸¬
        dark_mode.addEventListener('click', async () => {
            var mode = dark_mode.classList;
            switch (true) {
                case mode.contains('light'):
                    dark();
                    document.cookie = "dark=on"; // å„²å­˜è¨­å®šè‡³cookie
                    break;
                case mode.contains('dark'):
                    light();
                    document.cookie = "dark=off"; // å„²å­˜è¨­å®šè‡³cookie
                    break;
            }
        });

        // å½ˆå‡ºæç¤ºæ¡†(tipç‚ºtrueå‘¼å«æç¤ºæ¡†;åä¹‹è­¦å‘Šæ¡†)
        async function show_toast(messages, mode = null) {
            switch (mode) {
                case "tip":
                    Toast(toast_tip, message_tip, messages);
                    break;
                case "warning":
                    Toast(toast_Waring, message, messages);
                    break;
                default:
                    Toast(toast_tip, message_tip, messages);
            }
        }
    </script>
    {% endblock Script %}
    {% endblock JS %}
</body>

</html>

{% endblock Html %}